<!DOCTYPE html>
<html lang="en">
<head>
  

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuizPro</title>
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="icon" type="image/x-icon"
      href="{{ url_for('static', filename='assets/favicon/favicon.ico') }}">
</head>
<body>
  <div class="menu-bar-wrapper">
    <div class="menu-bar">
      <a href="{{ url_for('logout') }}">Logout</a>
    </div>
  </div>
    
	<div class="container">
		<h2>Chat</h2>
		<div id="chatBox">
			<!-- Chat messages will appear here -->
		</div>

		<input type="text" id="userInput" placeholder="Type your message...">
		<button onclick="sendMessage()">Send</button>
	</div>

	<script>
		function sendMessage() {
			const input = document.getElementById('userInput').value.trim();
			if (!input) return;

			fetch('/answer_question', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({ answer: input })
			})
			.then(response => response.json())
			.then(data => {
				// Update chatBox with the response
				const chatBox = document.getElementById('chatBox');
				chatBox.innerHTML += `<div>User: ${input}</div>`;
				if (data.prompt) {
					chatBox.innerHTML += `<div>Bot: ${data.prompt}</div>`;
				} else if (data.done) {
					chatBox.innerHTML += `<div>Bot: All questions answered!</div>`;
				}
				document.getElementById('userInput').value = ''; // Clear input
			})
			.catch(error => {
				console.error('Error:', error);
			});
		}
	</script>
</body>
</html>