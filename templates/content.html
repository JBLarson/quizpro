<!DOCTYPE html>
<html>
<head>
	<title>Provide Content</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="menu-bar">
        <a href="/chat">Chat</a> |
		<a href="/config">Config</a> |
		<a href="/content">Content</a> |
		<a href="/setup">API Keys</a>
	</div>
	<div class="container">
		<h2>Upload or Paste Content</h2>

		<h3>Upload PowerPoint (.pptx)</h3>
		<input type="file" id="pptxFile" accept=".pptx">
		<button onclick="uploadPptx()">Upload</button>

		<h3>Or Paste Text</h3>
		<textarea id="pastedText" rows="10" cols="50" placeholder="Paste your text here..."></textarea>
		<br>
		<button onclick="saveText()">Submit Text</button>

		<br><br>
		<a href="/">‚Üê Back to Chat</a>
	</div>

	<script>
		function uploadPptx() {
			const fileInput = document.getElementById('pptxFile');
			const file = fileInput.files[0];
			if (!file) {
				alert('Please select a file.');
				return;
			}

			const formData = new FormData();
			formData.append('file', file);

			fetch('/extract_text', {
				method: 'POST',
				body: formData
			})
			.then(response => response.json())
			.then(data => {
				sessionStorage.setItem('content', JSON.stringify(data.slides));
				window.location.href = "/";
			})
			.catch(error => {
				console.error('Error:', error);
				alert('Failed to upload.');
			});
		}

		function saveText() {
			const text = document.getElementById('pastedText').value.trim();
			if (!text) {
				alert('Please paste some text.');
				return;
			}
			sessionStorage.setItem('content', text);
			window.location.href = "/";
		}
	</script>
</body>
</html>
